# 데이터 전처리

```
데이터 처리과정
- 도서나루 API 일 300건 한정 → 660개 시트 다운 받기
- 저자 / 제목 등 값 통합 해주는 작업 진행 (영어, 한글, 저자, 지은이 등)
- isbn 부가코드 대분류, 소분류 매칭 작업 진행
- csv 파일 내에서 ISBN 반올림 되는 현상 해결(xlsx형식, 사용자 지정 셀 서식)
- csv 파일 내 ISBN 부가코드 첫째 자리에 있는 0값이 삭제되는 현상
   → MySQL LPAD함수를 이용하여 0값 채워줌
```




### **1) 인기대출도서 데이터 수집(공공 도서관 내에서 많이 대출된 도서 목록)**

- ** **적용 조건)** **
    - 대출 기한 : 코로나 팬데믹 사태 전후 각 3년 (2017~2022.7)
    - 성별: 여성, 남성
    - 연령: 10대(14세-19세), 20대, 30대, 40대, 50~60대
    - 지역: 서울 한정
    - ISBN 부가 기호: 전체
    - 주제: 전체
    - 결과건수: 200건
    
    ![Untitled (2)](https://user-images.githubusercontent.com/109575843/205204016-356202c8-26ad-4daf-9bb7-0e46050ad0c9.png)
    👉 해당 조건들을 바탕으로, 도서관 정보나루에서 csv 혹은 xlsx형태로 데이터를 수집
    
<img width="1434" alt="스크린샷 2022-09-02 오후 12 03 07" src="https://user-images.githubusercontent.com/109575843/205204060-6fd52741-21b8-4b93-8851-598a8bb0aa0e.png">
추출된 데이터 양식: 순위, 서명, 저자, 출판사, 출판년도, 월, ISBN, ISBN 부가기호, KDC, 대출건수로 구성


 ### 2) 해당 데이터 양식에 조건 추가
   
- ** **조건 양식)** **

![Untitled](https://user-images.githubusercontent.com/109576738/205205270-36662045-d60b-4843-90a2-5b3aa0c2feb9.png)


- **추가된 도서나루 데이터 최종 수집 양식**

<img width="1433" alt="스크린샷 2022-09-02 오후 12 31 09" src="https://user-images.githubusercontent.com/109576738/205205406-2386ae50-abe7-4223-8f72-919e231292d7.png">


### 3) 데이터 통합

: google colab에서 수합한 660개의 스프레드 시트를 하나로 모으는 작업 실행


### 4) 데이터 형식 변환

**(1) 저자 열에 있는 데이터 통일**
<img width="371" alt="Untitled (3)" src="https://user-images.githubusercontent.com/109575843/205206185-a3de51a1-c00f-44da-b852-e6149309f7f9.png">
: “지은이:, 저자:, 지음, 글*그림, 글*사진 등 ‘저자 성함', illustrated by”와 같은 저자 설명 외의 부분 삭제

**(2) ISBN 번호가 자동 반올림 되는 문제**
: excel 파일 → 셀 서식 → 사용자 지정을 통해 해결

**(3) ISBN 부가 번호가 excel, csv에서 사라지는 문제**
: ISBN 부가번호 중 앞 자리가 0인 경우는, 엑셀이 ISBN 부가번호를 ‘숫자'로 인식하여 삭제
: mySQL에서 `LPAD함수`를 사용하여 해결

**(4) year 열을 인식하지 못하는 문제**
: 속성 값 year,month를 모두 YY, MM으로 변경하여 처리
